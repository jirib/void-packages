# Template file for 'jose'
pkgname=jose
version=10
revision=1
build_style=configure
configure_args="--prefix=/usr --disable-openmp"
hostmakedepends="pkg-config"
makedepends="jansson-devel openssl-devel zlib-devel"
short_desc="C implementation of Javascript Object Signing and Encryption"
maintainer="Jiri Belka <jirib79@gmail.com>"
license="Apache-2.0"
homepage="https://github.com/latchset/jose"
distfiles="https://github.com/latchset/jose/releases/download/v${version}/jose-${version}.tar.bz2"
checksum=5c9cdcfb535c4d9f781393d7530521c72b1dd81caa9934cab6dd752cc7efcd72

libjose_package() {
	short_desc+=" - library"
	pkg_install() {
	vmove "usr/lib/*.so.*"
	}
}

libjose-devel_package() {
	depends="libjose>=${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
	vmove usr/include
	vmove usr/lib/pkgconfig
	vmove "usr/lib/*.la"
	vmove "usr/lib/*.so"
	vmove "usr/share/man/man3"
	}
}

if [ "${CROSS_BUILD}" ]; then
	configure_args+=" --host=${XBPS_CROSS_TRIPLET}"
fi
